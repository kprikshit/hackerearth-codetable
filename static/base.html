<html>
    <head>
        <!-- Latest compiled and minified CSS
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
        -->
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div class="header">
            <div class="navigation">
                <div class="float-left">
                    <div class="float-left">
                        <a href="/" class="logo-codetable" class="logo-codetable no-underline float-left">CodeTable Test </a>
                    </div>
                    <div class="clear"></div>
                </div>
                <ul class="nav-bar no-padding float-right">
                    <li><a href="/">New Code</a></li>
                    <li><a href="/" target="_blank">Do Something</a></li>
                    <li><a href="/" target="_blank">FU</a></li>
                 </ul>
                 <div class="clear"></div>
            </div>
        </div><!--Header-->
        
        <div class="bl-page">
            <div class="filename-bar">
                <div id="file-name" class="filename float-left" onclick="showFileRename()" title="Click to rename">Untitled File</div>
                <div class="filename-text float-left hidden">
                    <form>
                        <div class="floating-wrapper">
                            <input type="text" id="file-name-value" name="filename" value=""></input>
                            <button onclick="saveFileName()" type="button" id="file-name-save-btn" class="filename-save button btn-blue medium-margin-left">Save</button>
                            <a id="file-name-cancel-btn" onclick="hideFileRename()" class="filename-cancel link-3 medium-margin-left link-near-button">Cancel</a>
                        </div>
                    </form>
                </div>
                <div class="float-right less-margin-left delete-digest-code">
                    <a onclick="delete_digest_code('4eb24bi', '/delete/4eb24bi/AJAX/'); return false;" class="delete">Delete</a>
                </div>
                <div class="clear"></div>
            </div><!-- filename div -->
            <hr class="hr">
            
            <div class="left">
                <div class="editor-container">
                    <div class="editor-extras">
                        <div class="float-left select-lang">
                            <select onchange="languageChange(this.value)" name="lang" id="lang">
                                <option value="C" >C (gcc 4.8.4)</option>
                                <option value="CPP" selected="selected">C++ (g++ 4.8.4)</option>
                                <option value="CPP11" >C++11 (g++ 4.8.4)</option>
                                <option value="CSHARP">C# (mono 3.2.8)</option>
                                <option value="JAVASCRIPT">JavaScript</option>
                                <option value="JAVA">Java (openjdk 1.7.0_09)</option>
                                <option value="PERL">Perl (perl 5.18.2)</option>
                                <option value="PHP">PHP (php 5.5.9)</option>
                                <option value="PYTHON">Python (python 2.7.6)</option>
                                <option value="RUBY">Ruby (ruby 2.1.1)</option>
                                <option value="TEXTFILE">Text</option>
                            </select>
                        </div><!-- select-lang-->
                        <div class="float-right btn-blue" id="save-code" onclick="saveCode()">Save</div>
                        <div class="clear"></div>
                    </div><!-- editor-extras -->
                    <div id="editor">
                    </div><!--Editor-div -->
                </div><!-- editor-container -->
                <div class="test-input-check medium-margin">
                    <input onchange="showInputTextarea()" name="test-input-checkbox" id="test-input-checkbox" type="checkbox">
                    <span onclick="textInputSpanClick()" class="test-input-checkbox-text body-font light">Use custom input for testing your code</span>
                    <div class="test-input-container medium-margin hidden">
                        <textarea id="test-input" class="nice-textarea" placeholder="Write your inputs to program.."></textarea>
                    </div>
                    <hr class="hr">
                </div><!-- test-input-check-->
                <div class="compile-and-test">
                    <div class="float-right medium-margin-left">
                        <button type="button" id="run-code" class="button btn-green" onclick="compileAndRun()">Compile and Run</button>
                    </div>
                    <div class="clear"></div>
                </div> <!-- compile and test -->
                <div class="dots-loader"></div>
                <div id="run-result" class="medium-margin body-font">
                    <div class="error-output"></div>
                    <div class="output hidden" id="output">
                    </div>
                </div>
            </div><!-- left -->
            
            <div class="right">
                <!-- activity status -->
                <div class="activity-status medium-margin">
                    <div class="right-panel-heading"> Code Information </div>
                    <hr class="hr">
                    <div class="time-and-date">
                        <div class="date-created">
                            <span class="date-created-msg">Date Created:</span>
                            <span class="date-created-value dark">Tue</span>
                        </div>
                        <div class="date-last-saved">
                            <span class="date-last-saved-msg">Last Modified:</span>
                            <span class="date-last-saved-value dark">Wed</span>
                        </div>
                    </div>
                </div>
                
                <!-- Share URL -->
                <div class="share-url standard-margin">
                    <div class="right-panel-heading">Share URL</div>
                    <hr class="hr">
                    <div class="clear"></div>
                    <div class="generate-public-url button btn-blue float-left" onclick="share('c08e51U');return false;"> Generate Public url </div>
                    <div class="clear"></div>
                </div>
                
            </div> <!-- right -->
            
            <div class="clear"></div>
        </div> <!-- Editor and stuff -->
        
        <div class="footer">
            <ul class="footer-bar no-padding">
                <li>
                    <a href="#"" target="_blank" class="underline-hover">Prikshit Kumar</a>
                    <span class="separator">|</span>
                </li>
                <li>
                    <a href="#" target="_blank" class="underline-hover">About</a>
                    <span class="separator">|</span>
                </li>
                <li>
                     <a href="mailto:kprikshit22@gmail.com" class="underline-hover" target="_blank">Contact</a>
                </li>
            </ul>
            <div class="social-buttons float-right">
                <a href="https://twitter.com/prikshit22" class="twitter-follow-button" data-show-count="false">Twitter: @prikshit</a>
                <div class="clear"></div>
            </div>
            <div class="clear"></div>
        </div><!-- Footer -->
    </body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script>
        
        // File name related functions
        function showFileRename(){
            $(".filename-text").show();
            $("#file-name").hide();
        }
        function saveFileName(){
            var nname =$("#file-name-value").val();
            if(nname == ""){
                nname= "Untitled File";
            } 
            $("#file-name").html(nname);
            hideFileRename();
        }
        function hideFileRename(){
            $(".filename-text").hide();
            $("#file-name").show();
        }
        
        // custom test Input related function
        function showInputTextarea(){
            var checked = $('#test-input-checkbox').is(":checked");
            if(checked){
                $(".test-input-container").show();
            }
            else{
                $(".test-input-container").hide();
            }
        }
        function textInputSpanClick(){
            var checked = $('#test-input-checkbox').is(":checked");
            if(checked){
                $(".test-input-container").hide();
                $('#test-input-checkbox').prop('checked', false);
            }
            else{
                $(".test-input-container").show();
                $('#test-input-checkbox').prop('checked', true);
            }
        }
        function saveCode(){
            var editor = ace.edit("editor");
            console.log(editor.session.getValue());
            var modes = editor.session.getMode().$id.split("/");
            var lang = modes[modes.length-1];
            console.log(lang);
            var lang = $("#lang").val();console.log(lang);
        }
        
        function compileAndRun(){
            var editor = ace.edit("editor");
            var data = editor.getValue();
            var modes = editor.session.getMode().$id.split("/");
            var lang = $("#lang").val();
            
            $.getJSON({
                type: 'POST',
                dataType: 'json',
                url: 'https://api.hackerearth.com/v3/code/run/',
                data: {'client_secret': 'f8c321f549d832c1be38f82f0a26defc886cd079', 'source': data, 'lang': lang },
                success: function(response){
                    console.log(response);
                    $("#output").html($.parseJSON(response).html);
                },
                error: function(error){
                    $(".error-output").show();
                    $(".erorr-output").html(error);
                }
             })
            
        }
        
        $(document).ready(function(){
            languageChange($("#lang").val());
        })
    </script>
    <!-- Ace editor scripts -->
    <script>
        function languageChange(value){
            var editor = ace.edit("editor");
            if(value=="C"){
                editor.session.setMode("ace/mode/c_cpp");
                editor.setValue('#include <stdio.h>\n\nint main(){\n\tprintf("%s", "Hello World!");\n\treturn 1;\n}');
            }
            else if(value=="CPP"){
                editor.session.setMode("ace/mode/c_cpp");
                editor.setValue('#include<iostream>\nusing namespace std;\n\nint main(){\n\tcout << "Hello World!!!" << endl;\n\treturn 0;\n}');
            }
            else if(value=="CPP11"){
                editor.session.setMode("ace/mode/c_cpp");
                editor.setValue('#include<iostream>\nusing namespace std;\n\nint main(){\n\tcout << "Hello World!!!" << endl;\n\treturn 0;\n}');
            }
            else if(value=="CSHARP"){
                editor.session.setMode("ace/mode/csharp");
                editor.session.setValue("This is a text");
            }
            else if(value=="JAVA"){
                editor.session.setMode("ace/mode/java");
                editor.session.setValue("class TestClass {\n\tpublic static void main(String args[] ) throws Exception {\n\t\tSystem.out.println('Hello World!');\n\t}\n}");
            }
            else if(value=="JAVSCRIPT"){
                editor.session.setMode("ace/mode/javascript");
                editor.session.setValue("This is a text");
            }
            else if(value=="PERL"){
                editor.session.setMode("ace/mode/perl");
                editor.session.setValue("This is a text");
            }
            else if(value=="PHP"){
                editor.session.setMode("ace/mode/php");
                editor.session.setValue('<?php\necho "Hello World!";\n?>');
            }
            else if(value=="PYTHON"){
                editor.session.setMode("ace/mode/python");
                editor.session.setValue("print 'Hello World!'");
            }
            else if(value=="RUBY"){
                editor.session.setMode("ace/mode/ruby");
                editor.session.setValue("This is a text");
            }
            else{
                editor.session.setMode("ace/mode/text");
                editor.session.setValue("This is a text");
            }
        }    
    </script>
    <script src="src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
    <script>
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/twilight");
        editor.session.setMode("ace/mode/c_cpp");
    </script>
</html>

